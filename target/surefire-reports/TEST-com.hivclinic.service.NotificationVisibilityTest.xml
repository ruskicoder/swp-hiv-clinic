<?xml version="1.0" encoding="UTF-8"?>
<testsuite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report-3.0.xsd" version="3.0" name="com.hivclinic.service.NotificationVisibilityTest" time="3.594" tests="3" errors="0" skipped="0" failures="0">
  <properties>
    <property name="java.specification.version" value="17"/>
    <property name="sun.cpu.isalist" value="amd64"/>
    <property name="sun.jnu.encoding" value="Cp1252"/>
    <property name="java.class.path" value="C:\Program Files\Apache\Maven\apache-maven-3.9.9\boot\plexus-classworlds-2.8.0.jar"/>
    <property name="forkCount" value="0"/>
    <property name="java.vm.vendor" value="Oracle Corporation"/>
    <property name="sun.arch.data.model" value="64"/>
    <property name="user.variant" value=""/>
    <property name="java.vendor.url" value="https://java.oracle.com/"/>
    <property name="user.timezone" value="Asia/Saigon"/>
    <property name="org.jboss.logging.provider" value="slf4j"/>
    <property name="maven.conf" value="C:\Program Files\Apache\Maven\apache-maven-3.9.9/conf"/>
    <property name="java.vm.specification.version" value="17"/>
    <property name="os.name" value="Windows 11"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="user.country" value="US"/>
    <property name="sun.boot.library.path" value="C:\Program Files\Java\jdk-17\bin"/>
    <property name="sun.java.command" value="org.codehaus.plexus.classworlds.launcher.Launcher test -DforkCount=0"/>
    <property name="jdk.debug" value="release"/>
    <property name="maven.home" value="C:\Program Files\Apache\Maven\apache-maven-3.9.9"/>
    <property name="surefire.test.class.path" value="C:\Users\PC\Github\swp-hiv-clinic\target\test-classes;C:\Users\PC\Github\swp-hiv-clinic\target\classes;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-web\3.2.0\spring-boot-starter-web-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter\3.2.0\spring-boot-starter-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot\3.2.0\spring-boot-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-autoconfigure\3.2.0\spring-boot-autoconfigure-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-logging\3.2.0\spring-boot-starter-logging-3.2.0.jar;C:\Users\PC\.m2\repository\ch\qos\logback\logback-classic\1.4.11\logback-classic-1.4.11.jar;C:\Users\PC\.m2\repository\ch\qos\logback\logback-core\1.4.11\logback-core-1.4.11.jar;C:\Users\PC\.m2\repository\org\apache\logging\log4j\log4j-to-slf4j\2.21.1\log4j-to-slf4j-2.21.1.jar;C:\Users\PC\.m2\repository\org\apache\logging\log4j\log4j-api\2.21.1\log4j-api-2.21.1.jar;C:\Users\PC\.m2\repository\org\slf4j\jul-to-slf4j\2.0.9\jul-to-slf4j-2.0.9.jar;C:\Users\PC\.m2\repository\jakarta\annotation\jakarta.annotation-api\2.1.1\jakarta.annotation-api-2.1.1.jar;C:\Users\PC\.m2\repository\org\yaml\snakeyaml\2.2\snakeyaml-2.2.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-json\3.2.0\spring-boot-starter-json-3.2.0.jar;C:\Users\PC\.m2\repository\com\fasterxml\jackson\datatype\jackson-datatype-jdk8\2.15.3\jackson-datatype-jdk8-2.15.3.jar;C:\Users\PC\.m2\repository\com\fasterxml\jackson\datatype\jackson-datatype-jsr310\2.15.3\jackson-datatype-jsr310-2.15.3.jar;C:\Users\PC\.m2\repository\com\fasterxml\jackson\module\jackson-module-parameter-names\2.15.3\jackson-module-parameter-names-2.15.3.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-tomcat\3.2.0\spring-boot-starter-tomcat-3.2.0.jar;C:\Users\PC\.m2\repository\org\apache\tomcat\embed\tomcat-embed-core\10.1.16\tomcat-embed-core-10.1.16.jar;C:\Users\PC\.m2\repository\org\apache\tomcat\embed\tomcat-embed-websocket\10.1.16\tomcat-embed-websocket-10.1.16.jar;C:\Users\PC\.m2\repository\org\springframework\spring-web\6.1.1\spring-web-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\spring-beans\6.1.1\spring-beans-6.1.1.jar;C:\Users\PC\.m2\repository\io\micrometer\micrometer-observation\1.12.0\micrometer-observation-1.12.0.jar;C:\Users\PC\.m2\repository\io\micrometer\micrometer-commons\1.12.0\micrometer-commons-1.12.0.jar;C:\Users\PC\.m2\repository\org\springframework\spring-webmvc\6.1.1\spring-webmvc-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\spring-context\6.1.1\spring-context-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\spring-expression\6.1.1\spring-expression-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-data-jpa\3.2.0\spring-boot-starter-data-jpa-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-aop\3.2.0\spring-boot-starter-aop-3.2.0.jar;C:\Users\PC\.m2\repository\org\aspectj\aspectjweaver\1.9.20.1\aspectjweaver-1.9.20.1.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-jdbc\3.2.0\spring-boot-starter-jdbc-3.2.0.jar;C:\Users\PC\.m2\repository\com\zaxxer\HikariCP\5.0.1\HikariCP-5.0.1.jar;C:\Users\PC\.m2\repository\org\springframework\spring-jdbc\6.1.1\spring-jdbc-6.1.1.jar;C:\Users\PC\.m2\repository\org\hibernate\orm\hibernate-core\6.3.1.Final\hibernate-core-6.3.1.Final.jar;C:\Users\PC\.m2\repository\jakarta\persistence\jakarta.persistence-api\3.1.0\jakarta.persistence-api-3.1.0.jar;C:\Users\PC\.m2\repository\org\jboss\logging\jboss-logging\3.5.3.Final\jboss-logging-3.5.3.Final.jar;C:\Users\PC\.m2\repository\org\hibernate\common\hibernate-commons-annotations\6.0.6.Final\hibernate-commons-annotations-6.0.6.Final.jar;C:\Users\PC\.m2\repository\io\smallrye\jandex\3.1.2\jandex-3.1.2.jar;C:\Users\PC\.m2\repository\com\fasterxml\classmate\1.6.0\classmate-1.6.0.jar;C:\Users\PC\.m2\repository\net\bytebuddy\byte-buddy\1.14.10\byte-buddy-1.14.10.jar;C:\Users\PC\.m2\repository\org\glassfish\jaxb\jaxb-runtime\4.0.4\jaxb-runtime-4.0.4.jar;C:\Users\PC\.m2\repository\org\glassfish\jaxb\jaxb-core\4.0.4\jaxb-core-4.0.4.jar;C:\Users\PC\.m2\repository\org\eclipse\angus\angus-activation\2.0.1\angus-activation-2.0.1.jar;C:\Users\PC\.m2\repository\org\glassfish\jaxb\txw2\4.0.4\txw2-4.0.4.jar;C:\Users\PC\.m2\repository\com\sun\istack\istack-commons-runtime\4.1.2\istack-commons-runtime-4.1.2.jar;C:\Users\PC\.m2\repository\jakarta\inject\jakarta.inject-api\2.0.1\jakarta.inject-api-2.0.1.jar;C:\Users\PC\.m2\repository\org\antlr\antlr4-runtime\4.10.1\antlr4-runtime-4.10.1.jar;C:\Users\PC\.m2\repository\org\springframework\data\spring-data-jpa\3.2.0\spring-data-jpa-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\data\spring-data-commons\3.2.0\spring-data-commons-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\spring-orm\6.1.1\spring-orm-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\spring-tx\6.1.1\spring-tx-6.1.1.jar;C:\Users\PC\.m2\repository\org\slf4j\slf4j-api\2.0.9\slf4j-api-2.0.9.jar;C:\Users\PC\.m2\repository\org\springframework\spring-aspects\6.1.1\spring-aspects-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-security\3.2.0\spring-boot-starter-security-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\spring-aop\6.1.1\spring-aop-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\security\spring-security-config\6.2.0\spring-security-config-6.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\security\spring-security-web\6.2.0\spring-security-web-6.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-validation\3.2.0\spring-boot-starter-validation-3.2.0.jar;C:\Users\PC\.m2\repository\org\apache\tomcat\embed\tomcat-embed-el\10.1.16\tomcat-embed-el-10.1.16.jar;C:\Users\PC\.m2\repository\org\hibernate\validator\hibernate-validator\8.0.1.Final\hibernate-validator-8.0.1.Final.jar;C:\Users\PC\.m2\repository\jakarta\validation\jakarta.validation-api\3.0.2\jakarta.validation-api-3.0.2.jar;C:\Users\PC\.m2\repository\com\microsoft\sqlserver\mssql-jdbc\12.4.2.jre11\mssql-jdbc-12.4.2.jre11.jar;C:\Users\PC\.m2\repository\com\fasterxml\jackson\datatype\jackson-datatype-hibernate6\2.15.3\jackson-datatype-hibernate6-2.15.3.jar;C:\Users\PC\.m2\repository\jakarta\transaction\jakarta.transaction-api\2.0.1\jakarta.transaction-api-2.0.1.jar;C:\Users\PC\.m2\repository\com\fasterxml\jackson\core\jackson-core\2.15.3\jackson-core-2.15.3.jar;C:\Users\PC\.m2\repository\com\fasterxml\jackson\core\jackson-databind\2.15.3\jackson-databind-2.15.3.jar;C:\Users\PC\.m2\repository\com\fasterxml\jackson\core\jackson-annotations\2.15.3\jackson-annotations-2.15.3.jar;C:\Users\PC\.m2\repository\io\jsonwebtoken\jjwt-api\0.11.5\jjwt-api-0.11.5.jar;C:\Users\PC\.m2\repository\io\jsonwebtoken\jjwt-impl\0.11.5\jjwt-impl-0.11.5.jar;C:\Users\PC\.m2\repository\io\jsonwebtoken\jjwt-jackson\0.11.5\jjwt-jackson-0.11.5.jar;C:\Users\PC\.m2\repository\org\projectlombok\lombok\1.18.30\lombok-1.18.30.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-starter-test\3.2.0\spring-boot-starter-test-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-test\3.2.0\spring-boot-test-3.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\boot\spring-boot-test-autoconfigure\3.2.0\spring-boot-test-autoconfigure-3.2.0.jar;C:\Users\PC\.m2\repository\com\jayway\jsonpath\json-path\2.8.0\json-path-2.8.0.jar;C:\Users\PC\.m2\repository\jakarta\xml\bind\jakarta.xml.bind-api\4.0.1\jakarta.xml.bind-api-4.0.1.jar;C:\Users\PC\.m2\repository\jakarta\activation\jakarta.activation-api\2.1.2\jakarta.activation-api-2.1.2.jar;C:\Users\PC\.m2\repository\net\minidev\json-smart\2.5.0\json-smart-2.5.0.jar;C:\Users\PC\.m2\repository\net\minidev\accessors-smart\2.5.0\accessors-smart-2.5.0.jar;C:\Users\PC\.m2\repository\org\ow2\asm\asm\9.3\asm-9.3.jar;C:\Users\PC\.m2\repository\org\assertj\assertj-core\3.24.2\assertj-core-3.24.2.jar;C:\Users\PC\.m2\repository\org\awaitility\awaitility\4.2.0\awaitility-4.2.0.jar;C:\Users\PC\.m2\repository\org\hamcrest\hamcrest\2.2\hamcrest-2.2.jar;C:\Users\PC\.m2\repository\org\junit\jupiter\junit-jupiter\5.10.1\junit-jupiter-5.10.1.jar;C:\Users\PC\.m2\repository\org\junit\jupiter\junit-jupiter-api\5.10.1\junit-jupiter-api-5.10.1.jar;C:\Users\PC\.m2\repository\org\opentest4j\opentest4j\1.3.0\opentest4j-1.3.0.jar;C:\Users\PC\.m2\repository\org\junit\platform\junit-platform-commons\1.10.1\junit-platform-commons-1.10.1.jar;C:\Users\PC\.m2\repository\org\apiguardian\apiguardian-api\1.1.2\apiguardian-api-1.1.2.jar;C:\Users\PC\.m2\repository\org\junit\jupiter\junit-jupiter-params\5.10.1\junit-jupiter-params-5.10.1.jar;C:\Users\PC\.m2\repository\org\junit\jupiter\junit-jupiter-engine\5.10.1\junit-jupiter-engine-5.10.1.jar;C:\Users\PC\.m2\repository\org\junit\platform\junit-platform-engine\1.10.1\junit-platform-engine-1.10.1.jar;C:\Users\PC\.m2\repository\org\mockito\mockito-core\5.7.0\mockito-core-5.7.0.jar;C:\Users\PC\.m2\repository\net\bytebuddy\byte-buddy-agent\1.14.10\byte-buddy-agent-1.14.10.jar;C:\Users\PC\.m2\repository\org\objenesis\objenesis\3.3\objenesis-3.3.jar;C:\Users\PC\.m2\repository\org\mockito\mockito-junit-jupiter\5.7.0\mockito-junit-jupiter-5.7.0.jar;C:\Users\PC\.m2\repository\org\skyscreamer\jsonassert\1.5.1\jsonassert-1.5.1.jar;C:\Users\PC\.m2\repository\com\vaadin\external\google\android-json\0.0.20131108.vaadin1\android-json-0.0.20131108.vaadin1.jar;C:\Users\PC\.m2\repository\org\springframework\spring-core\6.1.1\spring-core-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\spring-jcl\6.1.1\spring-jcl-6.1.1.jar;C:\Users\PC\.m2\repository\org\springframework\spring-test\6.1.1\spring-test-6.1.1.jar;C:\Users\PC\.m2\repository\org\xmlunit\xmlunit-core\2.9.1\xmlunit-core-2.9.1.jar;C:\Users\PC\.m2\repository\org\springframework\security\spring-security-test\6.2.0\spring-security-test-6.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\security\spring-security-core\6.2.0\spring-security-core-6.2.0.jar;C:\Users\PC\.m2\repository\org\springframework\security\spring-security-crypto\6.2.0\spring-security-crypto-6.2.0.jar;"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="user.home" value="C:\Users\PC"/>
    <property name="user.language" value="en"/>
    <property name="sun.stderr.encoding" value="cp437"/>
    <property name="java.specification.vendor" value="Oracle Corporation"/>
    <property name="java.version.date" value="2024-07-16"/>
    <property name="java.home" value="C:\Program Files\Java\jdk-17"/>
    <property name="file.separator" value="\"/>
    <property name="basedir" value="C:\Users\PC\Github\swp-hiv-clinic"/>
    <property name="java.vm.compressedOopsMode" value="32-bit"/>
    <property name="line.separator" value="&#10;"/>
    <property name="sun.stdout.encoding" value="cp437"/>
    <property name="java.vm.specification.vendor" value="Oracle Corporation"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="FILE_LOG_CHARSET" value="windows-1252"/>
    <property name="java.awt.headless" value="true"/>
    <property name="user.script" value=""/>
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers"/>
    <property name="java.runtime.version" value="17.0.12+8-LTS-286"/>
    <property name="user.name" value="PC"/>
    <property name="path.separator" value=";"/>
    <property name="os.version" value="10.0"/>
    <property name="java.runtime.name" value="Java(TM) SE Runtime Environment"/>
    <property name="file.encoding" value="Cp1252"/>
    <property name="guice.disable.misplaced.annotation.check" value="true"/>
    <property name="java.vm.name" value="Java HotSpot(TM) 64-Bit Server VM"/>
    <property name="localRepository" value="C:\Users\PC\.m2\repository"/>
    <property name="java.vendor.url.bug" value="https://bugreport.java.com/bugreport/"/>
    <property name="java.io.tmpdir" value="C:\Users\PC\AppData\Local\Temp\"/>
    <property name="com.zaxxer.hikari.pool_number" value="2"/>
    <property name="java.version" value="17.0.12"/>
    <property name="user.dir" value="C:\Users\PC\Github\swp-hiv-clinic"/>
    <property name="os.arch" value="amd64"/>
    <property name="maven.multiModuleProjectDirectory" value="C:\Users\PC\Github\swp-hiv-clinic"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="PID" value="5468"/>
    <property name="sun.os.patch.level" value=""/>
    <property name="CONSOLE_LOG_CHARSET" value="windows-1252"/>
    <property name="native.encoding" value="Cp1252"/>
    <property name="java.library.path" value="C:\Program Files\Java\jdk-17\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\Program Files\Common Files\Oracle\Java\javapath;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\WINDOWS\System32\OpenSSH\;C:\Program Files (x86)\Microsoft SQL Server\160\Tools\Binn\;C:\Program Files\Microsoft SQL Server\160\Tools\Binn\;C:\Program Files\Microsoft SQL Server\Client SDK\ODBC\170\Tools\Binn\;C:\Program Files\Microsoft SQL Server\160\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\160\DTS\Binn\;C:\Program Files\Java\jdk1.8.0_172\bin;D:\Tuan\TaiLieuHocTap2\Program\Git\cmd;D:\Tuan\TaiLieuHocTap2\Program\NodeJS\;C:\Program Files\Java\jdk-17\bin;C:\Program Files\Apache\Maven\apache-maven-3.9.9\bin;C:\Program Files\Apache\Maven\apache-maven-3.9.9\bin;C:\Program Files\Cloudflare\Cloudflare WARP\;C:\Users\PC\AppData\Local\Programs\Python\Launcher\;C:\Users\PC\AppData\Local\Microsoft\WindowsApps;D:\Tuan\TaiLieuHocTap2\Program\VSCode\Microsoft VS Code\bin;C:\Users\PC\AppData\Local\GitHubDesktop\bin;C:\Users\PC\AppData\Roaming\npm;;D:\Tuan\TaiLieuHocTap2\Program\IntelliJ IDEA 2025.1.1.1\bin;;D:\Tuan\TaiLieuHocTap2\Program\IntelliJ IDEA Community Edition 2025.1.1.1\bin;;c:\Users\PC\AppData\Roaming\Code\User\globalStorage\github.copilot-chat\debugCommand;."/>
    <property name="java.vm.info" value="mixed mode, sharing"/>
    <property name="java.vendor" value="Oracle Corporation"/>
    <property name="java.vm.version" value="17.0.12+8-LTS-286"/>
    <property name="classworlds.conf" value="C:\Program Files\Apache\Maven\apache-maven-3.9.9\bin\m2.conf"/>
    <property name="sun.io.unicode.encoding" value="UnicodeLittle"/>
    <property name="library.jansi.path" value="C:\Program Files\Apache\Maven\apache-maven-3.9.9\lib\jansi-native"/>
    <property name="java.class.version" value="61.0"/>
    <property name="LOGGED_APPLICATION_NAME" value="[HIV Clinic Backend] "/>
  </properties>
  <testcase name="testStaffCanSeeCancelledNotifications" classname="com.hivclinic.service.NotificationVisibilityTest" time="0.084">
    <system-out><![CDATA[2025-07-10T16:38:20.181+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.hivclinic.service.NotificationVisibilityTest]: NotificationVisibilityTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-07-10T16:38:20.189+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.hivclinic.HivClinicBackendApplication for test class com.hivclinic.service.NotificationVisibilityTest

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.0)

2025-07-10T16:38:20.245+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] c.h.service.NotificationVisibilityTest   : Starting NotificationVisibilityTest using Java 17.0.12 with PID 5468 (started by PC in C:\Users\PC\Github\swp-hiv-clinic)
2025-07-10T16:38:20.247+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] c.h.service.NotificationVisibilityTest   : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-07-10T16:38:20.249+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] c.h.service.NotificationVisibilityTest   : No active profile set, falling back to 1 default profile: "default"
2025-07-10T16:38:20.648+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-10T16:38:20.689+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 15 JPA repository interfaces.
2025-07-10T16:38:20.815+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-10T16:38:20.820+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-07-10T16:38:20.826+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-10T16:38:20.827+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-07-10T16:38:20.860+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection ConnectionID:6 ClientConnectionId: deef97ba-125a-4507-97a2-9c1c2f2f6d23
2025-07-10T16:38:20.861+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-07-10T16:38:20.862+07:00  WARN 5468 --- [HIV Clinic Backend] [           main] org.hibernate.orm.deprecation            : HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-10T16:38:21.192+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-10T16:38:22.743+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-10T16:38:23.202+07:00  WARN 5468 --- [HIV Clinic Backend] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-10T16:38:23.210+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] o.s.s.a.h.RoleHierarchyImpl              : setHierarchy() - The following role hierarchy was set: ROLE_ADMIN > ROLE_MANAGER
ROLE_MANAGER > ROLE_DOCTOR
ROLE_DOCTOR > ROLE_PATIENT
2025-07-10T16:38:23.218+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] o.s.s.a.h.RoleHierarchyImpl              : buildRolesReachableInOneStepMap() - From role ROLE_ADMIN one can reach role ROLE_MANAGER in one step.
2025-07-10T16:38:23.218+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] o.s.s.a.h.RoleHierarchyImpl              : buildRolesReachableInOneStepMap() - From role ROLE_MANAGER one can reach role ROLE_DOCTOR in one step.
2025-07-10T16:38:23.218+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] o.s.s.a.h.RoleHierarchyImpl              : buildRolesReachableInOneStepMap() - From role ROLE_DOCTOR one can reach role ROLE_PATIENT in one step.
2025-07-10T16:38:23.218+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] o.s.s.a.h.RoleHierarchyImpl              : buildRolesReachableInOneOrMoreStepsMap() - From role ROLE_DOCTOR one can reach [ROLE_PATIENT] in one or more steps.
2025-07-10T16:38:23.220+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] o.s.s.a.h.RoleHierarchyImpl              : buildRolesReachableInOneOrMoreStepsMap() - From role ROLE_MANAGER one can reach [ROLE_PATIENT, ROLE_DOCTOR] in one or more steps.
2025-07-10T16:38:23.220+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] o.s.s.a.h.RoleHierarchyImpl              : buildRolesReachableInOneOrMoreStepsMap() - From role ROLE_ADMIN one can reach [ROLE_PATIENT, ROLE_DOCTOR, ROLE_MANAGER] in one or more steps.
2025-07-10T16:38:23.317+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5370f81e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c19ec02, org.springframework.security.web.context.SecurityContextHolderFilter@2a4a4e9c, org.springframework.security.web.header.HeaderWriterFilter@322bd1f5, org.springframework.web.filter.CorsFilter@a2a542f, org.springframework.security.web.authentication.logout.LogoutFilter@2ab6b81a, com.hivclinic.config.JwtAuthenticationFilter@1ff52c12, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@78d09907, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@14184b91, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@ea54711, org.springframework.security.web.session.SessionManagementFilter@7847cd31, org.springframework.security.web.access.ExceptionTranslationFilter@1a4a58, org.springframework.security.web.access.intercept.AuthorizationFilter@c09972]
2025-07-10T16:38:23.479+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] c.h.service.NotificationVisibilityTest   : Started NotificationVisibilityTest in 3.277 seconds (process running for 44.528)
2025-07-10T16:38:23.481+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] com.hivclinic.config.DataInitializer     : Starting data initialization...
2025-07-10T16:38:23.481+07:00 DEBUG 5468 --- [HIV Clinic Backend] [   scheduling-1] c.h.s.NotificationSchedulingService      : Processing scheduled notifications
2025-07-10T16:38:23.481+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        count_big(*) 
    from
        Roles r1_0
Hibernate: 
    select
        count_big(*) 
    from
        Roles r1_0
2025-07-10T16:38:23.481+07:00 DEBUG 5468 --- [HIV Clinic Backend] [   scheduling-1] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0
2025-07-10T16:38:23.492+07:00  INFO 5468 --- [HIV Clinic Backend] [           main] com.hivclinic.config.DataInitializer     : Data already initialized, skipping...
2025-07-10T16:38:23.492+07:00 DEBUG 5468 --- [HIV Clinic Backend] [   scheduling-1] c.h.s.NotificationSchedulingService      : Found 0 notifications due for processing
2025-07-10T16:38:23.503+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        r1_0.RoleID,
        r1_0.RoleName 
    from
        Roles r1_0 
    where
        r1_0.RoleName=?
Hibernate: 
    select
        r1_0.RoleID,
        r1_0.RoleName 
    from
        Roles r1_0 
    where
        r1_0.RoleName=?
2025-07-10T16:38:23.523+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Users
        (CreatedAt, Email, FirstName, IsActive, LastName, PasswordHash, RoleID, Specialty, UpdatedAt, Username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Users
        (CreatedAt, Email, FirstName, IsActive, LastName, PasswordHash, RoleID, Specialty, UpdatedAt, Username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
DEBUG: Created test user with ID: 8
2025-07-10T16:38:23.539+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
DEBUG: Created test notification with ID: 12
2025-07-10T16:38:23.553+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    update
        Notifications 
    set
        CreatedAt=?,
        IsRead=?,
        Message=?,
        Priority=?,
        RelatedEntityID=?,
        RelatedEntityType=?,
        ScheduledFor=?,
        SentAt=?,
        status=?,
        Title=?,
        Type=?,
        UpdatedAt=?,
        UserID=? 
    where
        notificationId=?
Hibernate: 
    update
        Notifications 
    set
        CreatedAt=?,
        IsRead=?,
        Message=?,
        Priority=?,
        RelatedEntityID=?,
        RelatedEntityType=?,
        ScheduledFor=?,
        SentAt=?,
        status=?,
        Title=?,
        Type=?,
        UpdatedAt=?,
        UserID=? 
    where
        notificationId=?
2025-07-10T16:38:23.561+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
    order by
        n1_0.CreatedAt desc
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
    order by
        n1_0.CreatedAt desc
DEBUG: ✓ Staff can still access cancelled notifications for management
]]></system-out>
  </testcase>
  <testcase name="testMixedActiveAndCancelledNotifications" classname="com.hivclinic.service.NotificationVisibilityTest" time="0.076">
    <system-out><![CDATA[2025-07-10T16:38:23.586+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        r1_0.RoleID,
        r1_0.RoleName 
    from
        Roles r1_0 
    where
        r1_0.RoleName=?
Hibernate: 
    select
        r1_0.RoleID,
        r1_0.RoleName 
    from
        Roles r1_0 
    where
        r1_0.RoleName=?
2025-07-10T16:38:23.592+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Users
        (CreatedAt, Email, FirstName, IsActive, LastName, PasswordHash, RoleID, Specialty, UpdatedAt, Username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Users
        (CreatedAt, Email, FirstName, IsActive, LastName, PasswordHash, RoleID, Specialty, UpdatedAt, Username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
DEBUG: Created test user with ID: 9
2025-07-10T16:38:23.604+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
DEBUG: Created test notification with ID: 13
2025-07-10T16:38:23.609+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-10T16:38:23.624+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-10T16:38:23.629+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
    order by
        n1_0.CreatedAt desc
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
    order by
        n1_0.CreatedAt desc
DEBUG: Found 3 total notifications for user 9
2025-07-10T16:38:23.641+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.status!='CANCELLED' 
    order by
        n1_0.CreatedAt desc
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.status!='CANCELLED' 
    order by
        n1_0.CreatedAt desc
DEBUG: Filtered out 1 cancelled notifications for patient visibility
DEBUG: Successfully hidden 1 cancelled notifications from patient
DEBUG: Hidden cancelled notification ID 15 with title: Cancelled Medication Reminder and status: CANCELLED
DEBUG: Returning 2 visible notifications (filtered out 1 cancelled notifications)
DEBUG: ✓ Mixed scenario test passed - Only active notifications visible to patient
]]></system-out>
  </testcase>
  <testcase name="testCancelledNotificationsHiddenFromPatient" classname="com.hivclinic.service.NotificationVisibilityTest" time="0.113">
    <system-out><![CDATA[2025-07-10T16:38:23.664+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        r1_0.RoleID,
        r1_0.RoleName 
    from
        Roles r1_0 
    where
        r1_0.RoleName=?
Hibernate: 
    select
        r1_0.RoleID,
        r1_0.RoleName 
    from
        Roles r1_0 
    where
        r1_0.RoleName=?
2025-07-10T16:38:23.672+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Users
        (CreatedAt, Email, FirstName, IsActive, LastName, PasswordHash, RoleID, Specialty, UpdatedAt, Username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Users
        (CreatedAt, Email, FirstName, IsActive, LastName, PasswordHash, RoleID, Specialty, UpdatedAt, Username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
DEBUG: Created test user with ID: 10
2025-07-10T16:38:23.679+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
DEBUG: Created test notification with ID: 16
2025-07-10T16:38:23.692+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
    order by
        n1_0.CreatedAt desc
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
    order by
        n1_0.CreatedAt desc
DEBUG: Found 1 total notifications for user 10
2025-07-10T16:38:23.700+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.status!='CANCELLED' 
    order by
        n1_0.CreatedAt desc
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.status!='CANCELLED' 
    order by
        n1_0.CreatedAt desc
DEBUG: Filtered out 0 cancelled notifications for patient visibility
DEBUG: Returning 1 visible notifications (filtered out 0 cancelled notifications)
DEBUG: ✓ Step 1 passed - Notification initially visible to patient
DEBUG: ✓ Step 2 passed - Notification marked as CANCELLED
2025-07-10T16:38:23.708+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    update
        Notifications 
    set
        CreatedAt=?,
        IsRead=?,
        Message=?,
        Priority=?,
        RelatedEntityID=?,
        RelatedEntityType=?,
        ScheduledFor=?,
        SentAt=?,
        status=?,
        Title=?,
        Type=?,
        UpdatedAt=?,
        UserID=? 
    where
        notificationId=?
Hibernate: 
    update
        Notifications 
    set
        CreatedAt=?,
        IsRead=?,
        Message=?,
        Priority=?,
        RelatedEntityID=?,
        RelatedEntityType=?,
        ScheduledFor=?,
        SentAt=?,
        status=?,
        Title=?,
        Type=?,
        UpdatedAt=?,
        UserID=? 
    where
        notificationId=?
2025-07-10T16:38:23.716+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
    order by
        n1_0.CreatedAt desc
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
    order by
        n1_0.CreatedAt desc
DEBUG: Found 1 total notifications for user 10
2025-07-10T16:38:23.721+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.status!='CANCELLED' 
    order by
        n1_0.CreatedAt desc
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.status!='CANCELLED' 
    order by
        n1_0.CreatedAt desc
DEBUG: Filtered out 1 cancelled notifications for patient visibility
DEBUG: Successfully hidden 1 cancelled notifications from patient
DEBUG: Hidden cancelled notification ID 16 with title: Test Notification [CANCELLED] and status: CANCELLED
DEBUG: Returning 0 visible notifications (filtered out 1 cancelled notifications)
DEBUG: ✓ Step 3 passed - Cancelled notification hidden from patient
2025-07-10T16:38:23.725+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=?
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=?
DEBUG: Found 1 total unread notifications for user 10
2025-07-10T16:38:23.736+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=? 
        and n1_0.status!='CANCELLED'
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=? 
        and n1_0.status!='CANCELLED'
DEBUG: Filtered out 1 cancelled unread notifications for patient visibility
DEBUG: Successfully hidden 1 cancelled unread notifications from patient
DEBUG: Hidden cancelled unread notification ID 16 with title: Test Notification [CANCELLED] and status: CANCELLED
DEBUG: Returning 0 visible unread notifications (filtered out 1 cancelled notifications)
DEBUG: ✓ Step 4 passed - Cancelled notification not in unread list
2025-07-10T16:38:23.745+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=? 
        and n1_0.status!='CANCELLED'
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=? 
        and n1_0.status!='CANCELLED'
2025-07-10T16:38:23.748+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=?
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=?
DEBUG: Unread count for user 10: 0 (filtered out 1 cancelled)
2025-07-10T16:38:23.753+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        Notifications
        (CreatedAt, IsRead, Message, Priority, RelatedEntityID, RelatedEntityType, ScheduledFor, SentAt, status, Title, Type, UpdatedAt, UserID) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-07-10T16:38:23.759+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=? 
        and n1_0.status!='CANCELLED'
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=? 
        and n1_0.status!='CANCELLED'
2025-07-10T16:38:23.764+07:00 DEBUG 5468 --- [HIV Clinic Backend] [           main] org.hibernate.SQL                        : 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=?
Hibernate: 
    select
        n1_0.notificationId,
        n1_0.CreatedAt,
        n1_0.IsRead,
        n1_0.Message,
        n1_0.Priority,
        n1_0.RelatedEntityID,
        n1_0.RelatedEntityType,
        n1_0.ScheduledFor,
        n1_0.SentAt,
        n1_0.status,
        n1_0.Title,
        n1_0.Type,
        n1_0.UpdatedAt,
        n1_0.UserID 
    from
        Notifications n1_0 
    where
        n1_0.UserID=? 
        and n1_0.IsRead=?
DEBUG: Unread count for user 10: 1 (filtered out 1 cancelled)
DEBUG: ✓ Step 5 passed - Unread count correctly excludes cancelled notifications
DEBUG: ✅ All test steps passed - Cancelled notifications are properly hidden from patients
]]></system-out>
  </testcase>
</testsuite>