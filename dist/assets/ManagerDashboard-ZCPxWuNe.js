import{r as s,a as ue,d as r,j as e}from"./index-ottAEAuo.js";import{D as ve}from"./DashboardHeader-BBOE_SHF.js";import"./UserProfileDropdown-Cl9Ss_zV.js";const ge=[{key:"overview",label:"Dashboard Overview",icon:"ðŸ“Š"},{key:"patients",label:"Patient Management",icon:"ðŸ‘¥"},{key:"doctors",label:"Doctor Management",icon:"ðŸ‘¨â€âš•ï¸"},{key:"arv",label:"ARV Regimen Management",icon:"ðŸ’Š"},{key:"schedules",label:"Schedule Management",icon:"ðŸ“…"}],Ne=()=>{const[n,V]=s.useState("overview"),[h,M]=s.useState({}),[U,f]=s.useState(!0),[N,S]=s.useState(""),[B,m]=s.useState([]),[O,i]=s.useState(!0),[p,l]=s.useState(""),[z,x]=s.useState([]),[K,d]=s.useState(!0),[D,o]=s.useState(""),[W,q]=s.useState([]),[G,A]=s.useState(!0),[C,w]=s.useState(""),[j,I]=s.useState(""),[u,T]=s.useState(""),[H,J]=s.useState([]),[_,R]=s.useState(!0),[k,E]=s.useState(""),[v,F]=s.useState(""),[g,P]=s.useState(""),[Q,X]=s.useState(""),[Y,Z]=s.useState(""),$=ue();s.useEffect(()=>{n==="overview"&&(async()=>{f(!0),S("");try{const a=await r.get("/manager/stats");M(a.data)}catch(a){S(`Failed to load statistics: ${a.message}`)}finally{f(!1)}})()},[n]),s.useEffect(()=>{n==="patients"&&(async()=>{i(!0),l("");try{const a=await r.get("/manager/patients");m(a.data)}catch(a){l(`Failed to load patient list: ${a.message}`)}finally{i(!1)}})()},[n]),s.useEffect(()=>{n==="doctors"&&(async()=>{d(!0),o("");try{const a=await r.get("/manager/doctors");x(a.data)}catch(a){o(`Failed to load doctor list: ${a.message}`)}finally{d(!1)}})()},[n]),s.useEffect(()=>{n==="arv"&&b()},[n]);const b=async()=>{A(!0),w("");try{let t;j&&u?t=await r.get(`/manager/arv-treatments/search?from=${encodeURIComponent(j)}&to=${encodeURIComponent(u)}`):t=await r.get("/manager/arv-treatments"),q(t.data)}catch{w("Failed to load ARV regimens.")}finally{A(!1)}},ee=t=>I(t.target.value),te=t=>T(t.target.value),se=t=>{t.preventDefault(),b()};s.useEffect(()=>{n==="schedules"&&y()},[n]);const y=async()=>{R(!0),E("");try{let t;v&&g?t=await r.get(`/manager/schedules/search?from=${encodeURIComponent(v)}&to=${encodeURIComponent(g)}`):t=await r.get("/manager/schedules"),J(t.data)}catch{E("Failed to load schedules.")}finally{R(!1)}},ae=t=>F(t.target.value),ne=t=>P(t.target.value),re=t=>{t.preventDefault(),y()},ce=t=>{X(t.target.value)},ie=async t=>{if(t.key==="Enter"){const a=t.target.value;if(a.trim()===""){i(!0),l("");try{const c=await r.get("/manager/patients");m(c.data)}catch{l("Failed to load patient list.")}finally{i(!1)}return}i(!0),l("");try{const c=await r.get(`/manager/patients/search?q=${encodeURIComponent(a)}`);m(c.data)}catch{l("Failed to search patients.")}finally{i(!1)}}},le=t=>{Z(t.target.value)},de=async t=>{if(t.key==="Enter"){const a=t.target.value;if(a.trim()===""){d(!0),o("");try{const c=await r.get("/manager/doctors");x(c.data)}catch{o("Failed to load doctor list.")}finally{d(!1)}return}d(!0),o("");try{const c=await r.get(`/manager/doctors/search?q=${encodeURIComponent(a)}`);x(c.data)}catch{o("Failed to search doctors.")}finally{d(!1)}}},L=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"System Overview"})}),U?e.jsx("div",{className:"loading-state",children:e.jsx("div",{children:"ðŸ“Š Loading dashboard statistics..."})}):N?e.jsx("div",{className:"error-state",children:N}):e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total Patients"}),e.jsx("div",{className:"stat-number",children:h.totalPatients||0})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Active Doctors"}),e.jsx("div",{className:"stat-number",children:h.totalDoctors||0})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total Appointments"}),e.jsx("div",{className:"stat-number",children:h.totalAppointments||0})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"ARV Treatments"}),e.jsx("div",{className:"stat-number",children:h.totalARVTreatments||0})]})]})]}),oe=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"Patient Management"})}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search patients by name or email...",value:Q,onChange:ce,onKeyDown:ie,className:"search-input"})}),O?e.jsx("div",{className:"loading-state",children:"Loading patient data..."}):p?e.jsx("div",{className:"error-state",children:p}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Patient Info"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Specialty"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Registered"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:B.map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#1e293b"},children:[t.firstName," ",t.lastName]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["@",t.username]})]})}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.specialty||"General"}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.isActive?"active":"inactive"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"}),e.jsx("td",{children:e.jsx("button",{className:"action-link",onClick:()=>$(`/manager/patients/${t.userId}`),style:{background:"none",border:"none",cursor:"pointer"},children:"View Details"})})]},t.userId||a))})]})})]}),he=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"Doctor Management"})}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search doctors by name or specialty...",value:Y,onChange:le,onKeyDown:de,className:"search-input"})}),K?e.jsx("div",{className:"loading-state",children:"Loading doctor data..."}):D?e.jsx("div",{className:"error-state",children:D}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Doctor Info"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Specialty"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Joined"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:z.map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#1e293b"},children:["Dr. ",t.firstName," ",t.lastName]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["@",t.username]})]})}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.specialty||"General Medicine"}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.isActive?"active":"inactive"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"}),e.jsx("td",{children:e.jsx("button",{className:"action-link",onClick:()=>$(`/manager/doctors/${t.userId}`),style:{background:"none",border:"none",cursor:"pointer"},children:"View Profile"})})]},t.userId||a))})]})})]}),me=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"ARV Treatment Management"})}),e.jsxs("form",{className:"arv-search-form",onSubmit:se,style:{marginBottom:16,display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["From:",e.jsx("input",{type:"date",value:j,onChange:ee})]}),e.jsxs("label",{children:["To:",e.jsx("input",{type:"date",value:u,onChange:te})]}),e.jsx("button",{type:"submit",className:"search-btn",children:"Search"}),e.jsx("button",{type:"button",className:"reset-btn",onClick:()=>{I(""),T(""),b()},children:"Reset"})]}),G?e.jsx("div",{className:"loading-state",children:"Loading ARV treatment data..."}):C?e.jsx("div",{className:"error-state",children:C}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Treatment ID"}),e.jsx("th",{children:"Patient"}),e.jsx("th",{children:"Doctor"}),e.jsx("th",{children:"Regimen"}),e.jsx("th",{children:"Duration"}),e.jsx("th",{children:"Adherence"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:W.map((t,a)=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",t.arvTreatmentID]}),e.jsx("td",{children:t.patientName||"N/A"}),e.jsx("td",{children:t.doctorName||"N/A"}),e.jsx("td",{style:{fontWeight:"600"},children:t.regimen}),e.jsx("td",{children:e.jsxs("div",{style:{fontSize:"0.75rem"},children:[e.jsxs("div",{children:["Start: ",t.startDate]}),t.endDate&&e.jsxs("div",{children:["End: ",t.endDate]})]})}),e.jsx("td",{children:t.adherence||"Not recorded"}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.isActive?"active":"inactive"}`,children:t.isActive?"Active":"Completed"})})]},t.arvTreatmentID||a))})]})})]}),xe=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"Schedule Management"})}),e.jsxs("form",{className:"schedule-search-form",onSubmit:re,style:{marginBottom:16,display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["From:",e.jsx("input",{type:"date",value:v,onChange:ae})]}),e.jsxs("label",{children:["To:",e.jsx("input",{type:"date",value:g,onChange:ne})]}),e.jsx("button",{type:"submit",className:"search-btn",children:"Search"}),e.jsx("button",{type:"button",className:"reset-btn",onClick:()=>{F(""),P(""),y()},children:"Reset"})]}),_?e.jsx("div",{className:"loading-state",children:"Loading schedule data..."}):k?e.jsx("div",{className:"error-state",children:k}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Slot ID"}),e.jsx("th",{children:"Doctor"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Time"}),e.jsx("th",{children:"Availability"}),e.jsx("th",{children:"Notes"})]})}),e.jsx("tbody",{children:H.map((t,a)=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",t.availabilitySlotId]}),e.jsx("td",{children:t.doctorUser&&t.doctorUser.userId?`Doctor ID: ${t.doctorUser.userId}`:"N/A"}),e.jsx("td",{style:{fontWeight:"600"},children:t.slotDate}),e.jsx("td",{children:e.jsxs("div",{style:{fontSize:"0.875rem"},children:[t.startTime," - ",t.endTime]})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.isBooked?"booked":"available"}`,children:t.isBooked?"Booked":"Available"})}),e.jsx("td",{children:t.notes||"-"})]},t.availabilitySlotId||a))})]})})]}),je=()=>{switch(n){case"overview":return L();case"patients":return oe();case"doctors":return he();case"arv":return me();case"schedules":return xe();default:return L()}};return e.jsxs("div",{className:"manager-dashboard",children:[e.jsx(ve,{title:"Manager Dashboard"}),e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-layout",children:[e.jsxs("aside",{className:"manager-sidebar",children:[e.jsx("div",{className:"sidebar-title",children:"Navigation Menu"}),e.jsx("nav",{className:"sidebar-nav",children:ge.map(t=>e.jsxs("div",{className:`sidebar-option ${n===t.key?"active":""}`,onClick:()=>V(t.key),children:[e.jsx("span",{className:"sidebar-icon",children:t.icon}),e.jsx("span",{children:t.label})]},t.key))})]}),e.jsx("main",{className:"dashboard-main",children:je()})]})})]})};export{Ne as default};
