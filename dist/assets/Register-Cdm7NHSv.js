import{a as b,u as w,r as d,j as e,L as j,c as u}from"./index-CScRpsKl.js";/* empty css             */const y=()=>{const h=b(),{register:f}=w(),[r,p]=d.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phoneNumber:""}),[s,o]=d.useState({}),[t,c]=d.useState(!1),l=a=>{const{name:i,value:n}=a.target;p(m=>({...m,[i]:n})),s[i]&&o(m=>({...m,[i]:""}))},N=async()=>{const a={};if(r.username.trim()||(a.username="Username is required"),r.email.trim()?/\S+@\S+\.\S+/.test(r.email)||(a.email="Email is invalid"):a.email="Email is required",r.password?r.password.length<6&&(a.password="Password must be at least 6 characters"):a.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(a.confirmPassword="Passwords do not match"):a.confirmPassword="Please confirm your password",r.firstName.trim()||(a.firstName="First name is required"),r.lastName.trim()||(a.lastName="Last name is required"),r.username.trim()&&!a.username)try{const i=await u.checkUsername(r.username);i.success||(a.username=i.message)}catch(i){console.error("Username check error:",i)}if(r.email.trim()&&!a.email)try{const i=await u.checkEmail(r.email);i.success||(a.email=i.message)}catch(i){console.error("Email check error:",i)}return o(a),Object.keys(a).length===0},x=async a=>{a.preventDefault(),c(!0);try{if(!await N())return;const n=await f(r);n.success?h("/login",{state:{message:"Registration successful! Please log in."}}):o({submit:n.message||"Registration failed. Please try again."})}catch(i){o({submit:i.message||"Registration failed. Please try again."})}finally{c(!1)}};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h1",{children:"Create Account"}),e.jsx("p",{children:"Join the HIV Medical Treatment System"})]}),e.jsxs("form",{onSubmit:x,className:"auth-form",noValidate:!0,children:[s.submit&&e.jsx("div",{className:"error-message",role:"alert",children:s.submit}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:l,disabled:t,required:!0,"aria-describedby":s.firstName?"firstName-error":void 0}),s.firstName&&e.jsx("span",{id:"firstName-error",className:"field-error",role:"alert",children:s.firstName})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:l,disabled:t,required:!0,"aria-describedby":s.lastName?"lastName-error":void 0}),s.lastName&&e.jsx("span",{id:"lastName-error",className:"field-error",role:"alert",children:s.lastName})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:l,disabled:t,required:!0,"aria-describedby":s.username?"username-error":void 0}),s.username&&e.jsx("span",{id:"username-error",className:"field-error",role:"alert",children:s.username})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:l,disabled:t,required:!0,"aria-describedby":s.email?"email-error":void 0}),s.email&&e.jsx("span",{id:"email-error",className:"field-error",role:"alert",children:s.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:r.phoneNumber,onChange:l,disabled:t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:l,disabled:t,required:!0,minLength:"6","aria-describedby":s.password?"password-error":void 0}),s.password&&e.jsx("span",{id:"password-error",className:"field-error",role:"alert",children:s.password})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:l,disabled:t,required:!0,"aria-describedby":s.confirmPassword?"confirmPassword-error":void 0}),s.confirmPassword&&e.jsx("span",{id:"confirmPassword-error",className:"field-error",role:"alert",children:s.confirmPassword})]}),e.jsx("button",{type:"submit",className:"auth-button",disabled:t,children:t?"Creating Account...":"Create Account"})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["Already have an account?"," ",e.jsx(j,{to:"/login",className:"auth-link",children:"Sign in here"})]})})]})})};export{y as default};
