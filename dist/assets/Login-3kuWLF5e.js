import{r as c,u as j,b as f,j as e,L as w}from"./index-ottAEAuo.js";import{B as v}from"./BackNavigation-HgcMJe-S.js";/* empty css             */const k=()=>{const[t,h]=c.useState({username:"",password:""}),[s,o]=c.useState({}),[l,d]=c.useState(!1),{login:p}=j(),m=f().state?.message,u=a=>{const{name:r,value:n}=a.target;h(i=>({...i,[r]:n})),s[r]&&o(i=>({...i,[r]:""}))},x=()=>{const a={};return t.username.trim()||(a.username="Username is required"),t.password||(a.password="Password is required"),o(a),Object.keys(a).length===0},g=async a=>{a.preventDefault(),d(!0);try{if(!x())return;const n=await p(t);n&&n.token&&localStorage.setItem("token",n.token)}catch(r){o({submit:r.message||"Login failed. Please try again."})}finally{d(!1)}};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx(v,{}),e.jsx("h2",{children:"Welcome Back"}),e.jsx("p",{children:"Sign in to your HIV Medical Treatment System account"})]}),m&&e.jsx("div",{className:"success-message",children:m}),s.submit&&e.jsx("div",{className:"error-message",children:s.submit}),e.jsxs("form",{onSubmit:g,className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",value:t.username,onChange:u,className:s.username?"error":"",placeholder:"Enter your username",autoComplete:"username"}),s.username&&e.jsx("span",{className:"field-error",children:s.username})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:u,className:s.password?"error":"",placeholder:"Enter your password",autoComplete:"current-password"}),s.password&&e.jsx("span",{className:"field-error",children:s.password})]}),e.jsx("button",{type:"submit",className:"auth-button",disabled:l,children:l?"Signing In...":"Sign In"})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["Don't have an account?"," ",e.jsx(w,{to:"/register",children:"Create one here"})]})})]})})};export{k as default};
