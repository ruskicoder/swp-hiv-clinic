import{r as l,u as N,a as g,j as e}from"./index-ottAEAuo.js";const w=()=>{const[t,a]=l.useState(!1),i=l.useRef(null),{user:s,logout:h}=N(),o=g();l.useEffect(()=>{const r=n=>{i.current&&!i.current.contains(n.target)&&a(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]);const f=()=>{a(!t)},d=()=>{a(!1);let r=s?.role;switch(typeof r=="object"&&r!==null&&(r=r.roleName||r.name||""),r=(r||"").toLowerCase(),r){case"admin":o("/admin");break;case"doctor":o("/doctor");break;case"patient":o("/customer");break;case"manager":o("/manager");break;default:o("/")}},x=()=>{a(!1),o("/settings")},j=()=>{a(!1),h(),o("/")},c=(r,n)=>{const p=(r||"").trim(),u=(n||"").trim();return p&&u?`${p.charAt(0)}${u.charAt(0)}`.toUpperCase():s?.username?s.username.charAt(0).toUpperCase():"U"},m=()=>{const r=(s?.firstName||"").trim(),n=(s?.lastName||"").trim();return r&&n?`${r} ${n}`:s?.username||"User"},k=()=>typeof s?.role=="object"&&s?.role!==null?s.role.roleName||s.role.name||"User":s?.role||"User";return s?e.jsxs("div",{className:"user-profile-dropdown",ref:i,children:[e.jsxs("button",{className:"profile-button",onClick:f,"aria-label":"User profile menu","aria-expanded":t,children:[e.jsx("div",{className:"profile-avatar",children:s?.profileImageBase64?e.jsx("img",{src:s.profileImageBase64,alt:"Profile",className:"profile-image"}):e.jsx("div",{className:"profile-initials",children:c(s?.firstName,s?.lastName)})}),e.jsxs("div",{className:"profile-info",children:[e.jsx("span",{className:"profile-name",children:m()}),e.jsx("span",{className:"profile-role",children:k()})]}),e.jsx("svg",{className:`dropdown-arrow ${t?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),t&&e.jsxs("div",{className:"dropdown-menu",children:[e.jsxs("div",{className:"dropdown-header",onClick:d,style:{cursor:"pointer"},tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&d()},children:[e.jsx("div",{className:"dropdown-avatar",children:s?.profileImageBase64?e.jsx("img",{src:s.profileImageBase64,alt:"Profile",className:"dropdown-profile-image"}):e.jsx("div",{className:"dropdown-profile-initials",children:c(s?.firstName,s?.lastName)})}),e.jsxs("div",{className:"dropdown-user-info",children:[e.jsx("span",{className:"dropdown-name",children:m()}),e.jsx("span",{className:"dropdown-email",children:s?.email})]})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("div",{className:"dropdown-items",children:[e.jsxs("button",{className:"dropdown-item",onClick:x,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 1v6m0 6v6m11-7h-6m-6 0H1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),"Settings"]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("button",{className:"dropdown-item logout-item",onClick:j,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"16,17 21,12 16,7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Log out"]})]})]})]}):null};export{w as U};
