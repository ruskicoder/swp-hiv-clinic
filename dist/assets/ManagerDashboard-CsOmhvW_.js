import{r as a,a as ie,d as r,j as e}from"./index-CScRpsKl.js";import{D as de}from"./DashboardHeader-BQ5_pi8w.js";import"./UserProfileDropdown-Cd9gt73g.js";const le=[{key:"overview",label:"Dashboard Overview",icon:"📊"},{key:"patients",label:"Patient Management",icon:"👥"},{key:"doctors",label:"Doctor Management",icon:"👨‍⚕️"},{key:"arv",label:"ARV Regimen Management",icon:"💊"},{key:"schedules",label:"Schedule Management",icon:"📅"}],je=()=>{const[n,P]=a.useState("overview"),[h,R]=a.useState({}),[L,g]=a.useState(!0),[b,y]=a.useState(""),[$,x]=a.useState([]),[F,i]=a.useState(!0),[N,d]=a.useState(""),[M,j]=a.useState([]),[V,l]=a.useState(!0),[f,o]=a.useState(""),[U,B]=a.useState([]),[O,S]=a.useState(!0),[p,D]=a.useState(""),[z,K]=a.useState([]),[W,A]=a.useState(!0),[w,I]=a.useState(""),[m,k]=a.useState(""),[u,C]=a.useState(""),[q,G]=a.useState(""),[H,J]=a.useState(""),E=ie();a.useEffect(()=>{n==="overview"&&(async()=>{g(!0),y("");try{const s=await r.get("/manager/stats");R(s.data)}catch(s){y(`Failed to load statistics: ${s.message}`)}finally{g(!1)}})()},[n]),a.useEffect(()=>{n==="patients"&&(async()=>{i(!0),d("");try{const s=await r.get("/manager/patients");x(s.data)}catch(s){d(`Failed to load patient list: ${s.message}`)}finally{i(!1)}})()},[n]),a.useEffect(()=>{n==="doctors"&&(async()=>{l(!0),o("");try{const s=await r.get("/manager/doctors");j(s.data)}catch(s){o(`Failed to load doctor list: ${s.message}`)}finally{l(!1)}})()},[n]),a.useEffect(()=>{n==="arv"&&(S(!0),D(""),r.get("/manager/arv-treatments").then(t=>B(t.data)).catch(()=>D("Failed to load ARV regimens.")).finally(()=>S(!1)))},[n]),a.useEffect(()=>{n==="schedules"&&v()},[n]);const v=async()=>{A(!0),I("");try{let t;m&&u?t=await r.get(`/manager/schedules/search?from=${encodeURIComponent(m)}&to=${encodeURIComponent(u)}`):t=await r.get("/manager/schedules"),K(t.data)}catch{I("Failed to load schedules.")}finally{A(!1)}},_=t=>k(t.target.value),Q=t=>C(t.target.value),X=t=>{t.preventDefault(),v()},Y=t=>{G(t.target.value)},Z=async t=>{if(t.key==="Enter"){const s=t.target.value;if(s.trim()===""){i(!0),d("");try{const c=await r.get("/manager/patients");x(c.data)}catch{d("Failed to load patient list.")}finally{i(!1)}return}i(!0),d("");try{const c=await r.get(`/manager/patients/search?q=${encodeURIComponent(s)}`);x(c.data)}catch{d("Failed to search patients.")}finally{i(!1)}}},ee=t=>{J(t.target.value)},te=async t=>{if(t.key==="Enter"){const s=t.target.value;if(s.trim()===""){l(!0),o("");try{const c=await r.get("/manager/doctors");j(c.data)}catch{o("Failed to load doctor list.")}finally{l(!1)}return}l(!0),o("");try{const c=await r.get(`/manager/doctors/search?q=${encodeURIComponent(s)}`);j(c.data)}catch{o("Failed to search doctors.")}finally{l(!1)}}},T=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"System Overview"})}),L?e.jsx("div",{className:"loading-state",children:e.jsx("div",{children:"📊 Loading dashboard statistics..."})}):b?e.jsx("div",{className:"error-state",children:b}):e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total Patients"}),e.jsx("div",{className:"stat-number",children:h.totalPatients||0})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Active Doctors"}),e.jsx("div",{className:"stat-number",children:h.totalDoctors||0})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total Appointments"}),e.jsx("div",{className:"stat-number",children:h.totalAppointments||0})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"ARV Treatments"}),e.jsx("div",{className:"stat-number",children:h.totalARVTreatments||0})]})]})]}),se=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"Patient Management"})}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search patients by name or email...",value:q,onChange:Y,onKeyDown:Z,className:"search-input"})}),F?e.jsx("div",{className:"loading-state",children:"Loading patient data..."}):N?e.jsx("div",{className:"error-state",children:N}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Patient Info"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Specialty"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Registered"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:$.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#1e293b"},children:[t.firstName," ",t.lastName]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["@",t.username]})]})}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.specialty||"General"}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.isActive?"active":"inactive"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"}),e.jsx("td",{children:e.jsx("button",{className:"action-link",onClick:()=>E(`/manager/patients/${t.userId}`),style:{background:"none",border:"none",cursor:"pointer"},children:"View Details"})})]},t.userId||s))})]})})]}),ae=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"Doctor Management"})}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Search doctors by name or specialty...",value:H,onChange:ee,onKeyDown:te,className:"search-input"})}),V?e.jsx("div",{className:"loading-state",children:"Loading doctor data..."}):f?e.jsx("div",{className:"error-state",children:f}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Doctor Info"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Specialty"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Joined"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:M.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#1e293b"},children:["Dr. ",t.firstName," ",t.lastName]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["@",t.username]})]})}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.specialty||"General Medicine"}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.isActive?"active":"inactive"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"}),e.jsx("td",{children:e.jsx("button",{className:"action-link",onClick:()=>E(`/manager/doctors/${t.userId}`),style:{background:"none",border:"none",cursor:"pointer"},children:"View Profile"})})]},t.userId||s))})]})})]}),ne=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"ARV Treatment Management"})}),O?e.jsx("div",{className:"loading-state",children:"Loading ARV treatment data..."}):p?e.jsx("div",{className:"error-state",children:p}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Treatment ID"}),e.jsx("th",{children:"Patient"}),e.jsx("th",{children:"Doctor"}),e.jsx("th",{children:"Regimen"}),e.jsx("th",{children:"Duration"}),e.jsx("th",{children:"Adherence"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:U.map((t,s)=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",t.arvTreatmentID]}),e.jsx("td",{children:t.patientName||"N/A"}),e.jsx("td",{children:t.doctorName||"N/A"}),e.jsx("td",{style:{fontWeight:"600"},children:t.regimen}),e.jsx("td",{children:e.jsxs("div",{style:{fontSize:"0.75rem"},children:[e.jsxs("div",{children:["Start: ",t.startDate]}),t.endDate&&e.jsxs("div",{children:["End: ",t.endDate]})]})}),e.jsx("td",{children:t.adherence||"Not recorded"}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.isActive?"active":"inactive"}`,children:t.isActive?"Active":"Completed"})})]},t.arvTreatmentID||s))})]})})]}),re=()=>e.jsxs("div",{children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"Schedule Management"})}),e.jsxs("form",{className:"schedule-search-form",onSubmit:X,style:{marginBottom:16,display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{children:["From:",e.jsx("input",{type:"date",value:m,onChange:_})]}),e.jsxs("label",{children:["To:",e.jsx("input",{type:"date",value:u,onChange:Q})]}),e.jsx("button",{type:"submit",className:"search-btn",children:"Search"}),e.jsx("button",{type:"button",className:"reset-btn",onClick:()=>{k(""),C(""),v()},children:"Reset"})]}),W?e.jsx("div",{className:"loading-state",children:"Loading schedule data..."}):w?e.jsx("div",{className:"error-state",children:w}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Slot ID"}),e.jsx("th",{children:"Doctor"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Time"}),e.jsx("th",{children:"Availability"}),e.jsx("th",{children:"Notes"})]})}),e.jsx("tbody",{children:z.map((t,s)=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",t.availabilitySlotId]}),e.jsx("td",{children:t.doctorUser&&t.doctorUser.userId?`Doctor ID: ${t.doctorUser.userId}`:"N/A"}),e.jsx("td",{style:{fontWeight:"600"},children:t.slotDate}),e.jsx("td",{children:e.jsxs("div",{style:{fontSize:"0.875rem"},children:[t.startTime," - ",t.endTime]})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${t.isBooked?"booked":"available"}`,children:t.isBooked?"Booked":"Available"})}),e.jsx("td",{children:t.notes||"-"})]},t.availabilitySlotId||s))})]})})]}),ce=()=>{switch(n){case"overview":return T();case"patients":return se();case"doctors":return ae();case"arv":return ne();case"schedules":return re();default:return T()}};return e.jsxs("div",{className:"manager-dashboard",children:[e.jsx(de,{title:"Manager Dashboard"}),e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-layout",children:[e.jsxs("aside",{className:"manager-sidebar",children:[e.jsx("div",{className:"sidebar-title",children:"Navigation Menu"}),e.jsx("nav",{className:"sidebar-nav",children:le.map(t=>e.jsxs("div",{className:`sidebar-option ${n===t.key?"active":""}`,onClick:()=>P(t.key),children:[e.jsx("span",{className:"sidebar-icon",children:t.icon}),e.jsx("span",{children:t.label})]},t.key))})]}),e.jsx("main",{className:"dashboard-main",children:ce()})]})})]})};export{je as default};
